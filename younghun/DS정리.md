# DataScience 말해야 할 내용



## 데이터 수집

팀원들의 다양한 취미 활동 및 흥미 분야 Brainstorming

술, 게임, 운동, 자동차, 부동산, 가게, 인구수, 애완

리서치 조사결과 대부분의 산업군에서 서비스가 이미 최적화가 완료돼있음

But 애완사업군은 아직 웹 서비스 및 플랫폼이 상대적으로 덜 발달돼있음.

애완산업군에서 무엇을 할 수 있을까?

처음 시작 : 유기견 정보를 수집. 후 각 견종에 따른 특성을 조사 해서 딥러닝 진행후에 사용자에 알맞는	견종을 추천 But 딥러닝이 걸리는 시간과 딥러닝 할 수 있는 만족할 만한 데이터 수집이

힘듬을 알아차림.



두번째 주제 : 사용자에게 애완동물을 키우기 좋은 장소를 추천해보자

### 1. 부동산 데이터 수집이 가능한가?

서울특별시 기준 너무나도 많은 부동산 데이터가 있고

각 지역 및 동네별로 가격대가 너무 다양하게 형성되어 있음.

본인 프로젝트를 진행하기엔 너무 자료 수집이 오래걸림



### 2. 그렇다면 애완동물 시설물의 수의 따라 추천을 진행해 보자

다행히도 서울특별시에서 제공하는 애완시설물들의 수가

각 자치구역별로 나와있었음

또한 리서치 결과 이러한 시설물들을 따로 수집해서 저장해두는 사이트도 발견,,

### 3. 그렇다면 모델링 및 서비스는 어떻게 진행할 것인가?

서울특별시를 사각형의 polygon형태로 쪼개어서 

각 위경도를 설정 후에

그 위경도 반경내에 각 시설군 별로 얼마나 있는지 찾아서

군집 (비지도학습) 모델링 진행 후에

각 군집의 특성 혹은 사용자의 인풋에 따라 변할 수 있게 점수화 시키기

엔지니어 파트는 사용자의 인풋을 웹을 통해 받아서 옳바른 형태로 DB에 적재후에

군집화 되어있는 데이터에서 사용자의 인풋값과 결합하여 웹으로 다시 보내주는 형식의

작업이 필요함.



## Data 모델링

총 15개의 피처를 수집완료

각 피처들의 

이름 

타입

주소

개폐업여부

전화번호

를 먼저 수집하고

주소에 따라서 각 시설군들의 위 경도 좌표를 구글맵 크롤링을 통해 수집

15개의 피처들을

csv 파일에서 json파일로 변경하여 

MongoDB에 적재 후에

jupyter notebook 에서 

함수 pymongo를 사용해서

서울특별시의 각 위경도 별로 시설군의 개수를 파악 ( 코드를 보여주며 설명하면 좋을듯)

K-Means와 DBScan을 활용하여 초기 모델링 진행



랜덤한 좌표 10000개를 생성

반경 2km내에 몇개의 시설들이 있는지 파악 

데이터 프레임으로 다시 만든 후에

군집화 진행

But 모링 진행후 차원축소를 통해 모델링 시각화 결과

완벽하게 서울특별시 지도에 가까운 모습을 보임

예상결과: 서로 다른 구에 있는 동이 산업시설들의 특징이 비슷한 것이 있을거라 예상

But 반경범위가 너무크고 랜덤한 좌표 생성시

특정 자치구에 좌표가 모여있을 확률이 높음

결과 : 서로 다른구에있는 동끼리 군집화가 이루어진게 아니라 반경이 너무 넓다 보니

무조건 적으로 같은 구 안에있는 동끼리 군집화가 이루어짐.



해결 방법 : 반경범위를 축소시키고 서울특별시 좌표들을 생성할 때 이 반경범위와 최대한 겹치지 않으면서도 촘촘하게 위 경도를 생성해야함.



### 2차 모델링

서울 특별시 좌표를 생성 할 때 단순하게 랜덤좌표를 생성하는게 아니라

서울특별시의 동서남북의 위 경도를 파악후에 

위 경도 생성시 서로간의 거리가 500m 간격으로 생성

위 경도 0.005 마다 500m 간격으로 나타남.

반경 범위도 2000m가 아니라 700m로 생성 이유는

실제 애완견 키우는 사람들이 본인들의 애완동물을 데리고 이용하는 시설은 최대한 집근처로 선호함

또한 700m로 설정시 처음 나타난 모델링의 문제또한 해결 할 수 있었음.



### 3차 모델링

위 결과 

서울특별시 안에

장묘업, 보호소 등의 시설 

즉 애완동물을 위한 편의시설보단 실질적으로 "동물"을 위한 시설들이 없거나 혹은 1개씩있는것으로 파악됐음

이로인해서 군집화가 이것이 있는 지역과 없는 지역으로 나타남을 우려

실질적으로 서울특별시 내에서 동물을 "키우는"데에는 필요가 없는것으로 피처를 분석

보호소, 장묘업 시설들을 군집화 과정에서 삭제

또한 공원, 놀이터, 음식점은 걷지않고

차를타고 이동해서 그곳에서 반려동물과 함께 여가시간을 즐기는 것으로 파악

700m가 아닌 2km로 설정해서

700m로 설정시 최대 2개 밖에 나오지 않음.

각 동 별로 더 다양한 갯수를 가질 수 있도록 설정.

### 모델링 결과

서울특별시 위 경도 간격을 500m로 설정후에

반경 700m 내에 시설물들을 파악

군집화 진행 후 sql에 적재 후에 사용자 인풋의 따라

이후 모델링 변경 및 보완.



## 이후 모델링 변환

실질적으로 사용자 인풋을 받아본 결과

인풋값이 중요도임에 중점을 둠

단순 갯수만으론 인풋값과 군집결과를 연동시키기 어려움.

군집 결과를 점수화 시킬 수 있는 방안이 필요함

#### 방안 모색

1. 각 군집들의 (20개) 특성을 전부 분석후에 

   사용자 인풋에 따라서 각 군집들에게 개별의 점수를 주어서

   이후 웹 서비스를 진행할 때 그에 알맞는 군집을 추출 후 추천

2.  단순 개수가 아닌 미리 점수화를 진행

   [개수 - 평균] / 평균 을 통해 각 위 경도 별로 전체 피처들의 평균대비 몇 % 더 많거나 혹은 적은지를 파악

   Min Max Scalar를 통해서 0부터 1까지로 모든 값들을 스케일링 진행

   이유는 사용자 인풋이 1~5의 중요도 값을 받아오다 보니

   특정한 위 경도에서 많게는 3배 혹은 아예 없는 피처들의 발생

   중요도 값을 곱해주는 순간 3배에 해당하는 피처를 갖고있는 지역을 추천하는 현상 발생

3. 결론 : 평균대비 % X 사용자의 중요도 값을 통해서

   사용자가 생각하는 중요도가 영향력이 있고

   처음 군집화가 진행된 데이터또한 영향력이 있어서

   유의미한 추천결과를 발생시킬 수 있음.

   

